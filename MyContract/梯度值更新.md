# 多方安全计算梯度值更新策略



假设参与者为ABCD，为了避免局部梯度值泄露导致攻击者差分分析出隐私数据集，我们对各参与者的局部梯度值进行保护：



* 用户A选取随机数r1，将自己的梯度值与随机数之和M1上传至区块链，并利用零知识证明生成proof，上传至IPFS；添加随机数是为了混淆局部梯度值；
* 用户BCD选取随机数r2、r3、r4，进行相同操作；
* 在A上传M1之后，选取随机数v1，计算P1=v1+r1，通过B的公钥加密P1上传至区块链；
* B利用私钥解密，计算得出A的P1，B计算P2=P1+r2，通过C的公钥加密上传至区块链；
* C解密P2，计算P3=P2+r3，通过D的公钥加密上传至区块链；
* D重复上述过程，最终通过A的公钥加密上传P4至区块链；
* A解密得到P4，P4=v1+r1+r2+r3+r4，A将P4减去v1，得到所有参与者梯度值的随机数之和$\Sigma r_i$
* A将$\Sigma r_i$上传至区块链，智能合约通过混淆的梯度值之和减去$\Sigma r_i$，得到原有的梯度值之和
* 智能合约求平均值，得到平均梯度值

